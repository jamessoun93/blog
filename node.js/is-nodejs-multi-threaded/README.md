# Is Node.js Multi-Threaded?

JS는 synchronous 언어인데 node.js에서는 어떻게 비동기 처리가 가능할까?

node.js는 js를 기반 런타임이니 js 동작방식대로 동작할 수 밖에 없지 않나?

---

main thread 가 있고 이 하나의 thread가 v8 엔진, node apis, libuv를 동작시킴.

이 중 blocking 함수가 있다면 전체 퍼포먼스에 영향을 미침.

여기서 libuv를 살펴봐야함.

libuv가 asynchronous I/O를 책임짐.

- file system
- network

event loop가 비동기 처리를 가능하게 해줌.

이벤트 루프는 비동기 코드를 실행시켜주는 libuv내 코드.

노드에서 비동기 함수를 호출할때마다 이벤트 루프에 할당됌.

모든 자바스크립트 코드는 메인 쓰레드에서 실행되고, 모든 비동기 처리는 이벤트 루프를 통해 처리됌.

이벤트 루프가 OS에게 일을 시키고 결과가 준비됐을때 전달받는 방식.

이벤트 루프는 직장 상사와 같음. 해당 업무가 진행돼야함을 알리고 완료 시 보고 받는 형태.

계속 새로운 이벤트를 처리할 수 있게 대기하고 있으며, 해당 이벤트가 다른 코드를 block하지 않도록 작업을 위임하는 것.

그렇다면 이벤트 루프에 올려지는 작업은 어디서 진행될까? 직원들은 누구일까?

두 가지 옵션이 존재.

1. OS
2. Thread Pool